"use client";
import { UserNav } from "@/app/auth/_components/user-nav";
import AccountTopUp from "@/components/account-top-up";
import Link from "next/link";
import useAuth from "@/hooks/useAuth";
import { useRouter } from "next/navigation";
import { useEffect } from "react";
const Header = () => {
  const { session, isAuthenticating } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!session && !isAuthenticating) {
      router.push("/auth");
    }
    if (!isAuthenticating && session) {
      if (!session.user) router.push("/auth");
    }
  }, [session, isAuthenticating, router]);

  return (
    <nav className="py-2 z-10 bg-accent border-b border-accent sticky top-0">
      <div className="container px-2 md:px-0 mx-auto flex justify-between items-center">
        <svg
          width="88"
          height="20"
          viewBox="0 0 88 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_623_155)">
            <path
              d="M49.8155 4.61169V6.1649H49.7656C49.616 5.93479 49.4265 5.70469 49.1871 5.465C48.9527 5.2253 48.6484 5.00958 48.2843 4.80824C47.9252 4.61169 47.4913 4.4439 46.9975 4.31447C46.5088 4.18024 45.9502 4.11792 45.3317 4.11792C44.3093 4.11792 43.3417 4.29529 42.419 4.65483C41.4913 5.01437 40.6883 5.53211 39.9951 6.20804C39.3018 6.87918 38.7432 7.70373 38.3292 8.6673C37.9053 9.63086 37.6958 10.7095 37.6958 11.8984C37.6958 12.953 37.8704 13.9501 38.2195 14.8849C38.5686 15.8197 39.0624 16.6491 39.7108 17.3682C40.3591 18.0872 41.1571 18.6577 42.1048 19.0796C43.0524 19.5014 44.1347 19.7124 45.3317 19.7124C45.7706 19.7124 46.2145 19.674 46.6584 19.5925C47.1023 19.5158 47.5262 19.3912 47.9302 19.2138C48.3342 19.0364 48.6883 18.8207 48.9975 18.557C49.3068 18.2982 49.5611 17.9866 49.7656 17.6414H49.8155V19.2186H54.3591V4.61169H49.8155ZM49.626 13.0872C49.5013 13.5235 49.2868 13.931 48.9826 14.3097C48.6883 14.6836 48.2893 15 47.8105 15.2541C47.3217 15.5129 46.7282 15.6328 46.015 15.6328C45.3018 15.6328 44.7382 15.5129 44.2644 15.2541C43.7906 15.0048 43.4015 14.6836 43.0973 14.3097C42.803 13.931 42.5836 13.5283 42.4389 13.1064C42.3043 12.6846 42.2345 12.3058 42.2345 11.9511C42.2345 11.5292 42.3143 11.1026 42.4539 10.6615C42.6035 10.2253 42.828 9.81782 43.1372 9.45349C43.4464 9.08916 43.8355 8.78235 44.3043 8.54266C44.7681 8.31255 45.3267 8.18791 45.9851 8.18791C46.6434 8.18791 47.1871 8.29817 47.6659 8.51869C48.1547 8.73441 48.5537 9.02204 48.8729 9.38158C49.1921 9.74112 49.4215 10.1438 49.5811 10.5848C49.7357 11.0211 49.8155 11.4621 49.8155 11.8936C49.8155 12.2483 49.7507 12.6414 49.626 13.0824V13.0872Z"
              fill="#2B2A4C"
            />
            <path
              d="M61.3665 4.86098V0H56.8229V4.86098H54.5835V8.17354H56.8229V15.0911C56.8229 16.2991 57.3316 17.3873 58.1496 18.1831C58.9775 18.9693 60.1047 19.4583 61.3665 19.4583V8.17354H63.5561V4.86098H61.3665Z"
              fill="#2B2A4C"
            />
            <path
              d="M64.9326 0V3.31256H69.4763V0H64.9326ZM64.9326 4.86098V19.4631H69.4763V4.86098H64.9326Z"
              fill="#2B2A4C"
            />
            <path
              d="M82.1247 11.6444L87.2419 4.86108H83.5412C82.4888 4.86108 81.5212 5.38361 80.9776 6.24651L79.4165 8.70576L78.03 6.53894C77.3566 5.49867 76.1796 4.86108 74.8978 4.86108H71.5063L76.6235 11.6444L70.8529 19.4584H73.9951C75.4514 19.4584 76.798 18.7537 77.596 17.584L79.4115 14.9378L81.0624 17.3875C81.9252 18.677 83.4165 19.4584 85.0125 19.4584H88L82.1197 11.6444H82.1247Z"
              fill="#2B2A4C"
            />
            <path
              d="M32.9925 3.6001H4.54863C2.03491 3.6001 0 5.55599 0 7.9721V15.6183C0 18.0344 2.03491 19.9999 4.54863 19.9999H32.9925C35.5062 19.9999 37.5511 18.0392 37.5511 15.6183V7.9721C37.5511 5.55599 35.5112 3.6001 32.9925 3.6001ZM9.61596 13.4371H6.42394V18.9644H4.7581C3.16209 18.9644 1.86035 17.7228 1.86035 16.1888V7.44478C1.86035 6.07373 3.01746 4.96635 4.44389 4.96635H15.192C14.8728 5.04305 14.5636 5.13413 14.2594 5.24439C13.3267 5.57517 12.4988 6.06414 11.8005 6.69693C11.3117 7.13318 10.8978 7.64132 10.5486 8.20221C10.384 8.45149 10.2394 8.71994 10.1097 8.9884C9.93516 9.36232 9.79052 9.76021 9.69077 10.1821C9.55112 10.7525 9.4813 11.3566 9.4813 11.9894C9.4813 12.4831 9.5212 12.9673 9.61596 13.4371ZM20.399 18.9644V17.9385C20.1746 18.0872 19.9252 18.2214 19.6509 18.3316C19.2718 18.4803 18.8728 18.5953 18.4489 18.6624C18.0299 18.7295 17.616 18.7631 17.207 18.7631C17.1272 18.7631 17.0524 18.7631 16.9825 18.7583C15.9451 18.7391 15.0025 18.557 14.1796 18.2166C13.2918 17.8523 12.5387 17.3633 11.9352 16.7353C11.3267 16.1121 10.8628 15.393 10.5387 14.578C10.389 14.2041 10.2793 13.8302 10.1995 13.4419L10.1945 13.4371C10.1895 13.3988 10.1746 13.3556 10.1746 13.3221C10.1347 13.1063 10.1047 12.8858 10.0848 12.6653C10.0648 12.4496 10.0549 12.2195 10.0549 11.9942C10.0549 11.7353 10.0698 11.4764 10.0898 11.2319C10.1047 11.0498 10.1297 10.8724 10.1596 10.695C10.1746 10.6087 10.1895 10.5272 10.2145 10.4361C10.2195 10.3547 10.2444 10.2684 10.2643 10.1869C10.3541 9.83212 10.4688 9.50134 10.6185 9.18015C10.7731 8.835 10.9526 8.50901 11.1621 8.20221C11.4314 7.77555 11.7556 7.38725 12.1147 7.04689C12.7431 6.46203 13.4663 6.00662 14.2893 5.69502C15.1222 5.38821 15.99 5.23481 16.9127 5.23481C16.9476 5.23481 16.9925 5.23481 17.0274 5.2396C17.0923 5.23481 17.1521 5.23481 17.217 5.23481C17.4514 5.23481 17.6758 5.2396 17.8903 5.26357C18.2145 5.29233 18.5137 5.34027 18.788 5.40738C19.2469 5.52244 19.6509 5.66625 19.995 5.84363C20.2194 5.95868 20.4239 6.08332 20.6035 6.21755V5.84363L20.5736 5.2396H26.0299V18.9357H25.4564V18.9692H20.414L20.399 18.9644ZM35.0673 18.9309H30.8479V11.5339C30.8479 11.2895 30.8329 11.0114 30.813 10.6902C30.783 10.369 30.7082 10.067 30.5736 9.77459C30.4339 9.48217 30.2194 9.23289 29.9252 9.02675C29.6309 8.8302 29.197 8.72953 28.6384 8.72953C28.0299 8.72953 27.5661 8.83979 27.2469 9.05551C27.1621 9.10825 27.0823 9.17057 27.0125 9.23289V5.7094C27.0474 5.68063 27.0923 5.65666 27.1322 5.6279C27.4264 5.43135 27.7955 5.26836 28.2344 5.12455C28.6733 4.99032 29.207 4.9232 29.8304 4.9232C30.5087 4.9232 31.182 5.03826 31.8504 5.26357C32.5237 5.49367 33.0424 5.77172 33.4414 6.09291C33.6259 6.2559 33.8155 6.45245 34.005 6.66817C34.2045 6.88389 34.3791 7.17153 34.5287 7.51189C34.6833 7.85225 34.813 8.26453 34.9077 8.73912C35.0075 9.2233 35.0623 9.79377 35.0623 10.4649V18.9309H35.0673ZM26.015 18.7535V18.9309H25.4414V18.9644H26.1197V18.9309H26.2244V18.8302H26.2394V18.7535H26.015Z"
              fill="#2B2A4C"
            />
            <path
              d="M10.5486 8.2023C10.384 8.45158 10.2394 8.72004 10.1097 8.9885C9.93515 9.36242 9.79052 9.76031 9.69077 10.1822H6.41895V8.21189L10.5436 8.19751L10.5486 8.2023Z"
              fill="#2B2A4C"
            />
            <path
              d="M20.8578 11.9942C20.8578 12.2435 20.8079 12.5503 20.7032 12.8859C20.5985 13.2071 20.4289 13.5043 20.1945 13.7824C19.9601 14.046 19.6459 14.2761 19.2618 14.4679C18.8927 14.6453 18.4189 14.7411 17.8503 14.7411C17.2818 14.7411 16.8379 14.6453 16.4788 14.4679C16.1047 14.2857 15.7955 14.0556 15.5611 13.7824C15.3217 13.4947 15.1421 13.2071 15.0324 12.8907C14.9276 12.5791 14.8678 12.2915 14.8678 12.0374C14.8678 11.7258 14.9227 11.3998 15.0424 11.0738C15.1571 10.7526 15.3366 10.4554 15.586 10.1822C15.8254 9.9185 16.1346 9.69319 16.5037 9.5254C16.8578 9.35762 17.3017 9.27612 17.8154 9.27612C18.3291 9.27612 18.783 9.35762 19.1571 9.51582C19.5361 9.67401 19.8553 9.88015 20.1047 10.139C20.3541 10.4027 20.5436 10.6951 20.6633 11.0163C20.793 11.3423 20.8528 11.6731 20.8528 11.999L20.8578 11.9942Z"
              fill="#2B2A4C"
            />
          </g>
          <defs>
            <clipPath id="clip0_623_155">
              <rect width="88" height="20" fill="white" />
            </clipPath>
          </defs>
        </svg>
        <Link href="/"></Link>
        <div className="account-actions flex gap-3 items-center">
          <AccountTopUp user={session?.user} />
          <UserNav user={session?.user} />
        </div>
      </div>
    </nav>
  );
};

export default Header;
